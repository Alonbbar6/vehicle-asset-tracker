<!DOCTYPE html>
<html>
<head>
    <title>Vehicles</title>
</head>
<body>
    <h1>Vehicles</h1>

    <!-- Filter Form -->
    <form method="GET" action="{{ url_for('vehicles') }}">
        <label>Año de adquisición:</label>
        <input type="text" name="anio" value="{{ request.args.get('anio', '') }}" placeholder="e.g. 2020">

        <label>Grupo de Familia:</label>
        <input type="text" name="grupo_familia" value="{{ request.args.get('grupo_familia', '') }}" placeholder="e.g. Transporte">

        <label>Costo máximo:</label>
        <input type="number" name="costo_max" value="{{ request.args.get('costo_max', '') }}" step="0.01" placeholder="e.g. 50000">

        <button type="submit">Filter</button>
        <a href="{{ url_for('vehicles') }}">Clear</a>
    </form>

    <a href="/add_vehicle">Add Vehicle</a>

    {% if rows %}
    <table border="1" cellpadding="5">
      <tr>
        {% for col in rows[0].keys() %}
          <th>{{ col }}</th>
        {% endfor %}
        <th>Actions</th>
      </tr>
      {% for row in rows %}
      <tr>
        {% for col in rows[0].keys() %}
          <td>{{ row[col] }}</td>
        {% endfor %}
        <td>
          <a href="{{ url_for('edit_vehicle', id=row['ID del vehículo']) }}">Edit</a>
          
          <form action="{{ url_for('delete_vehicle', id=row['ID del vehículo']) }}" method="POST" style="display:inline;">
              <button type="submit" onclick="return confirm('Are you sure you want to delete this vehicle?');">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
      <p>No vehicles found.</p>
    {% endif %}

</body>
</html>
